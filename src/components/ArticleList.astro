---
import type { TArticle } from "../content/config";
import { computeReadingTime } from "../util";

interface Props {
  articles: Array<{
    id: string;
    slug: string;
    body: string;
    collection: string;
    data: TArticle;
  }>;
}

const { articles } = Astro.props;
const orderedArticles = articles.sort((prev, next) => {
  const prevTime = new Date(prev.data.updatedAt).getTime();
  const nextTime = new Date(next.data.updatedAt).getTime();
  if (prevTime < nextTime) return 1;
  else if (prevTime > nextTime) return -1;

  return 0;
});
---

<ul class="grid grid-cols-1 md:grid-cols-2 gap-4">
  {
    orderedArticles.map((article) => (
      <li>
        <a href={`/articles/${article.slug}`} class="h-full flex flex-col">
          <h3 class="font-inter-semibold text-supporting-400 tracking-wider">
            {article.data.title}
          </h3>
          <p class="text-supporting-300">{article.data.description}</p>
          <p class="text-supporting-200">
            {computeReadingTime(article.body)} minutes read{" "}
            <span>&nbsp;|&nbsp;</span> {article.data.updatedAt}
          </p>
        </a>
      </li>
    ))
  }
</ul>
